{"ast":null,"code":"import React,{useEffect,useState}from'react';import{Card,CardContent,CardTitle}from'../components/Card';import{Button}from'../components/Button';import{getMe,updatePhone,startPhoneVerification,checkPhoneVerification}from'../utils/api';import{useToast}from'../components/Toast';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Profile=()=>{const[email,setEmail]=useState('');const[role,setRole]=useState('user');const[phone,setPhone]=useState('');const[message,setMessage]=useState('');const[error,setError]=useState('');const[code,setCode]=useState('');const[verifying,setVerifying]=useState(false);const{addToast}=useToast();useEffect(()=>{(async()=>{try{const me=await getMe();setEmail(me.email);setRole(me.role);setPhone(me.phone||'');}catch(e){setError(e.message||'Failed to load profile');}})();},[]);const onSave=async e=>{e.preventDefault();setMessage('');setError('');try{const me=await updatePhone(phone);setPhone(me.phone||'');setMessage('Phone updated successfully');addToast({title:'Phone updated',variant:'success'});}catch(e){const msg=e.message||'Failed to update';setError(msg);addToast({title:'Update failed',description:msg,variant:'error'});}};const onStartVerify=async()=>{setError('');setMessage('');setVerifying(true);try{await startPhoneVerification(phone);addToast({title:'Code sent',description:'Check your SMS messages',variant:'success'});}catch(e){const msg=e.message||'Failed to send code';setError(msg);addToast({title:'Failed to send code',description:msg,variant:'error'});}finally{setVerifying(false);}};const onCheckVerify=async()=>{setError('');setMessage('');setVerifying(true);try{const result=await checkPhoneVerification({phone,code});if(result.valid){setMessage('Phone verified');addToast({title:'Phone verified',variant:'success'});}else{setError('Invalid code');addToast({title:'Invalid code',variant:'error'});}}catch(e){const msg=e.message||'Verification failed';setError(msg);addToast({title:'Verification failed',description:msg,variant:'error'});}finally{setVerifying(false);}};return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen py-12\",children:/*#__PURE__*/_jsx(\"div\",{className:\"max-w-3xl mx-auto px-4 sm:px-6 lg:px-8\",children:/*#__PURE__*/_jsx(Card,{variant:\"glass\",children:/*#__PURE__*/_jsxs(CardContent,{className:\"p-6\",children:[/*#__PURE__*/_jsx(CardTitle,{className:\"mb-4\",children:\"Profile\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6 text-sm text-gray-600\",children:[\"Role: \",/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:role})]}),/*#__PURE__*/_jsxs(\"form\",{className:\"space-y-4\",onSubmit:onSave,children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{disabled:true,value:email,className:\"w-full px-3 py-2 border rounded-lg bg-gray-50\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Phone\"}),/*#__PURE__*/_jsx(\"input\",{value:phone,onChange:e=>setPhone(e.target.value),placeholder:\"e.g. +1xxxxxxxxxx\",className:\"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500\"})]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-red-600\",children:error}),message&&/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-green-600\",children:message}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-3\",children:[/*#__PURE__*/_jsx(Button,{type:\"submit\",children:\"Save\"}),/*#__PURE__*/_jsx(Button,{variant:\"secondary\",disabled:!phone,loading:verifying,onClick:onStartVerify,children:\"Send code\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-3 items-end\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Verification code\"}),/*#__PURE__*/_jsx(\"input\",{value:code,onChange:e=>setCode(e.target.value),placeholder:\"123456\",className:\"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"md:col-span-2\",children:/*#__PURE__*/_jsx(Button,{loading:verifying,onClick:onCheckVerify,children:\"Verify\"})})]})]})]})})})});};export default Profile;","map":{"version":3,"names":["React","useEffect","useState","Card","CardContent","CardTitle","Button","getMe","updatePhone","startPhoneVerification","checkPhoneVerification","useToast","jsx","_jsx","jsxs","_jsxs","Profile","email","setEmail","role","setRole","phone","setPhone","message","setMessage","error","setError","code","setCode","verifying","setVerifying","addToast","me","e","onSave","preventDefault","title","variant","msg","description","onStartVerify","onCheckVerify","result","valid","className","children","onSubmit","disabled","value","onChange","target","placeholder","type","loading","onClick"],"sources":["/home/abhinavgomra/project/Medi_Care-main/Medicare/frontend/src/pages/Profile.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { Card, CardContent, CardTitle } from '../components/Card';\nimport { Button } from '../components/Button';\nimport { getMe, updatePhone, startPhoneVerification, checkPhoneVerification } from '../utils/api';\nimport { useToast } from '../components/Toast';\n\nconst Profile = () => {\n  const [email, setEmail] = useState('');\n  const [role, setRole] = useState('user');\n  const [phone, setPhone] = useState('');\n  const [message, setMessage] = useState('');\n  const [error, setError] = useState('');\n  const [code, setCode] = useState('');\n  const [verifying, setVerifying] = useState(false);\n  const { addToast } = useToast();\n\n  useEffect(() => {\n    (async () => {\n      try {\n        const me = await getMe();\n        setEmail(me.email);\n        setRole(me.role);\n        setPhone(me.phone || '');\n      } catch (e) {\n        setError(e.message || 'Failed to load profile');\n      }\n    })();\n  }, []);\n\n  const onSave = async (e) => {\n    e.preventDefault();\n    setMessage('');\n    setError('');\n    try {\n      const me = await updatePhone(phone);\n      setPhone(me.phone || '');\n      setMessage('Phone updated successfully');\n      addToast({ title: 'Phone updated', variant: 'success' });\n    } catch (e) {\n      const msg = e.message || 'Failed to update';\n      setError(msg);\n      addToast({ title: 'Update failed', description: msg, variant: 'error' });\n    }\n  };\n\n  const onStartVerify = async () => {\n    setError(''); setMessage(''); setVerifying(true);\n    try {\n      await startPhoneVerification(phone);\n      addToast({ title: 'Code sent', description: 'Check your SMS messages', variant: 'success' });\n    } catch (e) {\n      const msg = e.message || 'Failed to send code';\n      setError(msg);\n      addToast({ title: 'Failed to send code', description: msg, variant: 'error' });\n    } finally { setVerifying(false); }\n  };\n\n  const onCheckVerify = async () => {\n    setError(''); setMessage(''); setVerifying(true);\n    try {\n      const result = await checkPhoneVerification({ phone, code });\n      if (result.valid) {\n        setMessage('Phone verified');\n        addToast({ title: 'Phone verified', variant: 'success' });\n      } else {\n        setError('Invalid code');\n        addToast({ title: 'Invalid code', variant: 'error' });\n      }\n    } catch (e) {\n      const msg = e.message || 'Verification failed';\n      setError(msg);\n      addToast({ title: 'Verification failed', description: msg, variant: 'error' });\n    } finally { setVerifying(false); }\n  };\n\n  return (\n    <div className=\"min-h-screen py-12\">\n      <div className=\"max-w-3xl mx-auto px-4 sm:px-6 lg:px-8\">\n        <Card variant=\"glass\">\n          <CardContent className=\"p-6\">\n            <CardTitle className=\"mb-4\">Profile</CardTitle>\n            <div className=\"mb-6 text-sm text-gray-600\">Role: <span className=\"font-medium\">{role}</span></div>\n            <form className=\"space-y-4\" onSubmit={onSave}>\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Email</label>\n                <input disabled value={email} className=\"w-full px-3 py-2 border rounded-lg bg-gray-50\" />\n              </div>\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Phone</label>\n                <input value={phone} onChange={(e)=>setPhone(e.target.value)} placeholder=\"e.g. +1xxxxxxxxxx\" className=\"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500\" />\n              </div>\n              {error && <div className=\"text-sm text-red-600\">{error}</div>}\n              {message && <div className=\"text-sm text-green-600\">{message}</div>}\n              <div className=\"flex gap-3\">\n                <Button type=\"submit\">Save</Button>\n                <Button variant=\"secondary\" disabled={!phone} loading={verifying} onClick={onStartVerify}>Send code</Button>\n              </div>\n              <div className=\"grid grid-cols-1 md:grid-cols-3 gap-3 items-end\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">Verification code</label>\n                  <input value={code} onChange={(e)=>setCode(e.target.value)} placeholder=\"123456\" className=\"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500\" />\n                </div>\n                <div className=\"md:col-span-2\">\n                  <Button loading={verifying} onClick={onCheckVerify}>Verify</Button>\n                </div>\n              </div>\n            </form>\n          </CardContent>\n        </Card>\n      </div>\n    </div>\n  );\n};\n\nexport default Profile;\n\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}