{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\abhin\\\\project\\\\Medi_Care-main\\\\Medicare\\\\frontend\\\\src\\\\pages\\\\VoiceControl.jsx\",\n  _s = $RefreshSig$();\nimport React, { useRef, useState } from 'react';\nimport { Card, CardContent, CardTitle } from '../components/Card';\nimport { Button } from '../components/Button';\nimport { transcribeVoice } from '../utils/api';\nimport { useToast } from '../components/Toast';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst VoiceControl = () => {\n  _s();\n  const [audioFile, setAudioFile] = useState(null);\n  const [text, setText] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const {\n    addToast\n  } = useToast();\n  const mediaRecorderRef = useRef(null);\n  const chunksRef = useRef([]);\n  const [recording, setRecording] = useState(false);\n  const startRecording = async () => {\n    setError('');\n    try {\n      const stream = await navigator.mediaDevices.getUserMedia({\n        audio: true\n      });\n      const mr = new MediaRecorder(stream);\n      mediaRecorderRef.current = mr;\n      chunksRef.current = [];\n      mr.ondataavailable = e => {\n        if (e.data.size > 0) chunksRef.current.push(e.data);\n      };\n      mr.onstop = async () => {\n        const blob = new Blob(chunksRef.current, {\n          type: 'audio/webm'\n        });\n        const file = new File([blob], 'recording.webm', {\n          type: 'audio/webm'\n        });\n        setAudioFile(file);\n      };\n      mr.start();\n      setRecording(true);\n    } catch (e) {\n      setError(e.message || 'Microphone access denied');\n    }\n  };\n  const stopRecording = () => {\n    const mr = mediaRecorderRef.current;\n    if (mr && mr.state !== 'inactive') {\n      mr.stop();\n      setRecording(false);\n    }\n  };\n  const onSubmit = async e => {\n    e.preventDefault();\n    if (!audioFile) return;\n    setLoading(true);\n    setText('');\n    setError('');\n    try {\n      const res = await transcribeVoice(audioFile);\n      setText(res.text || '');\n      addToast({\n        title: 'Transcription complete',\n        variant: 'success'\n      });\n    } catch (e) {\n      const msg = e.message || 'Transcription failed';\n      setError(msg);\n      addToast({\n        title: 'Transcription failed',\n        description: msg,\n        variant: 'error'\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen py-12\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"max-w-3xl mx-auto px-4 sm:px-6 lg:px-8\",\n      children: /*#__PURE__*/_jsxDEV(Card, {\n        variant: \"glass\",\n        children: /*#__PURE__*/_jsxDEV(CardContent, {\n          className: \"p-6\",\n          children: [/*#__PURE__*/_jsxDEV(CardTitle, {\n            className: \"mb-4\",\n            children: \"Voice Control\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 67,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center gap-3 mb-4\",\n            children: [!recording ? /*#__PURE__*/_jsxDEV(Button, {\n              onClick: startRecording,\n              children: \"Start Recording\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 70,\n              columnNumber: 17\n            }, this) : /*#__PURE__*/_jsxDEV(Button, {\n              onClick: stopRecording,\n              variant: \"secondary\",\n              children: \"Stop\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 72,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `text-sm ${recording ? 'text-red-600' : 'text-gray-500'}`,\n              children: recording ? 'Recording...' : 'Idle'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 74,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 68,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n            onSubmit: onSubmit,\n            className: \"space-y-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"file\",\n              accept: \"audio/*\",\n              onChange: e => {\n                var _e$target$files;\n                return setAudioFile(((_e$target$files = e.target.files) === null || _e$target$files === void 0 ? void 0 : _e$target$files[0]) || null);\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 77,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              type: \"submit\",\n              disabled: !audioFile || loading,\n              children: loading ? 'Transcribing...' : 'Upload & Transcribe'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 78,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 13\n          }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-sm text-red-600 mt-4\",\n            children: error\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 23\n          }, this), text && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-6\",\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              className: \"font-semibold mb-2\",\n              children: \"Transcribed Text\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 83,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"pre\", {\n              className: \"whitespace-pre-wrap text-gray-700 bg-white/60 p-4 rounded-lg border border-gray-200\",\n              children: text\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 84,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 63,\n    columnNumber: 5\n  }, this);\n};\n_s(VoiceControl, \"rpbf6/kuTbdKStqQq7JZVXkXgJM=\", false, function () {\n  return [useToast];\n});\n_c = VoiceControl;\nexport default VoiceControl;\nvar _c;\n$RefreshReg$(_c, \"VoiceControl\");","map":{"version":3,"names":["React","useRef","useState","Card","CardContent","CardTitle","Button","transcribeVoice","useToast","jsxDEV","_jsxDEV","VoiceControl","_s","audioFile","setAudioFile","text","setText","loading","setLoading","error","setError","addToast","mediaRecorderRef","chunksRef","recording","setRecording","startRecording","stream","navigator","mediaDevices","getUserMedia","audio","mr","MediaRecorder","current","ondataavailable","e","data","size","push","onstop","blob","Blob","type","file","File","start","message","stopRecording","state","stop","onSubmit","preventDefault","res","title","variant","msg","description","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","accept","onChange","_e$target$files","target","files","disabled","_c","$RefreshReg$"],"sources":["C:/Users/abhin/project/Medi_Care-main/Medicare/frontend/src/pages/VoiceControl.jsx"],"sourcesContent":["import React, { useRef, useState } from 'react';\nimport { Card, CardContent, CardTitle } from '../components/Card';\nimport { Button } from '../components/Button';\nimport { transcribeVoice } from '../utils/api';\nimport { useToast } from '../components/Toast';\n\nconst VoiceControl = () => {\n  const [audioFile, setAudioFile] = useState(null);\n  const [text, setText] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const { addToast } = useToast();\n  const mediaRecorderRef = useRef(null);\n  const chunksRef = useRef([]);\n  const [recording, setRecording] = useState(false);\n\n  const startRecording = async () => {\n    setError('');\n    try {\n      const stream = await navigator.mediaDevices.getUserMedia({ audio: true });\n      const mr = new MediaRecorder(stream);\n      mediaRecorderRef.current = mr;\n      chunksRef.current = [];\n      mr.ondataavailable = (e) => { if (e.data.size > 0) chunksRef.current.push(e.data); };\n      mr.onstop = async () => {\n        const blob = new Blob(chunksRef.current, { type: 'audio/webm' });\n        const file = new File([blob], 'recording.webm', { type: 'audio/webm' });\n        setAudioFile(file);\n      };\n      mr.start();\n      setRecording(true);\n    } catch (e) {\n      setError(e.message || 'Microphone access denied');\n    }\n  };\n\n  const stopRecording = () => {\n    const mr = mediaRecorderRef.current;\n    if (mr && mr.state !== 'inactive') {\n      mr.stop();\n      setRecording(false);\n    }\n  };\n\n  const onSubmit = async (e) => {\n    e.preventDefault();\n    if (!audioFile) return;\n    setLoading(true); setText(''); setError('');\n    try {\n      const res = await transcribeVoice(audioFile);\n      setText(res.text || '');\n      addToast({ title: 'Transcription complete', variant: 'success' });\n    } catch (e) {\n      const msg = e.message || 'Transcription failed';\n      setError(msg);\n      addToast({ title: 'Transcription failed', description: msg, variant: 'error' });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen py-12\">\n      <div className=\"max-w-3xl mx-auto px-4 sm:px-6 lg:px-8\">\n        <Card variant=\"glass\">\n          <CardContent className=\"p-6\">\n            <CardTitle className=\"mb-4\">Voice Control</CardTitle>\n            <div className=\"flex items-center gap-3 mb-4\">\n              {!recording ? (\n                <Button onClick={startRecording}>Start Recording</Button>\n              ) : (\n                <Button onClick={stopRecording} variant=\"secondary\">Stop</Button>\n              )}\n              <div className={`text-sm ${recording ? 'text-red-600' : 'text-gray-500'}`}>{recording ? 'Recording...' : 'Idle'}</div>\n            </div>\n            <form onSubmit={onSubmit} className=\"space-y-4\">\n              <input type=\"file\" accept=\"audio/*\" onChange={(e)=>setAudioFile(e.target.files?.[0] || null)} />\n              <Button type=\"submit\" disabled={!audioFile || loading}>{loading ? 'Transcribing...' : 'Upload & Transcribe'}</Button>\n            </form>\n            {error && <div className=\"text-sm text-red-600 mt-4\">{error}</div>}\n            {text && (\n              <div className=\"mt-6\">\n                <h4 className=\"font-semibold mb-2\">Transcribed Text</h4>\n                <pre className=\"whitespace-pre-wrap text-gray-700 bg-white/60 p-4 rounded-lg border border-gray-200\">{text}</pre>\n              </div>\n            )}\n          </CardContent>\n        </Card>\n      </div>\n    </div>\n  );\n};\n\nexport default VoiceControl;\n\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}